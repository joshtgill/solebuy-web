<html>
	{% load static %}
	{% load helper %}
	<head>
		<title>SoleBuy - {{ categoryForm.name.value }}</title>

		<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="{% static 'styles/common.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'styles/category.css' %}">
	</head>
	<body>
		{% include "topnav/topnav_with_search.html" %}

		<div class="content">
			<form action="" method="POST">
				{% csrf_token %}
				<div class="filters">
					{% for assister in category.assisters.all %}
						<div class="filter">
							<h3>{{ assister.prompt }}</h3>
							<hr>
							{% with forloop.counter0|stringformat:"i" as assisterId %}
								{% for filterText in assister.filters.all %}
									{% with assisterId|determineButtonValue:forloop.counter0 as buttonValue %}
										<button type="Submit" name="button" value={{ buttonValue }} style="{{ buttonValue|buildButtonStyle:AFIdMap }}">{{ filterText.contents }}</button>
									{% endwith %}
								{% endfor %}
							{% endwith %}
						</div>
					{% endfor %}
				</div>
			</form>
			<div class="results">
				<div class="products">
					<form id="productForm" action="" method="POST">
						<input id="productInput" type="hidden" name="idd"/>
						{% csrf_token %}
						{% for product in filteredProducts %}
							<div class="product" onclick="submitProductForm('{{ product.id }}')">
								{% with category.name|buildProductImagePath:product.imageFileName as productImagePath %}
									<img src="{% static productImagePath %}" alt="{{ product.name }}">
								{% endwith %}
								<div class="details">
									<h1>{{ product.name }}</h1>
									<h2><b>${{ product.price }}</b></h2>
									<hr>
									{% for pro in product.pros.all %}
										<div class="procon">
											<img src="{% static 'images/plus.png' %}" alt="Plus">
											<h1>{{ pro.contents }}</h1>
										</div>
									{% endfor %}
									<div class="spacer"></div>
									{% for con in product.cons.all %}
										<div class="procon">
											<img src="{% static 'images/minus.png' %}" alt="Plus">
											<h1>{{ con.contents }}</h1>
										</div>
									{% endfor %}
								</div>
							</div>
						{% endfor %}
					</form>
				</div>
			</div>
		</div>

		{% if popupProduct %}
			{% include "product_popup.html" %}
		{% endif %}

	</body>

	<script src="{% static 'scripts/category.js' %}"></script>
</html>
