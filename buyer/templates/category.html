<html>
	{% load static %}
	{% load helper %}
	<head>
		<title>SoleBuy - {{ category.name }}</title>

		<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="{% static 'styles/common.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'styles/category.css' %}">
	</head>
	<body>
		{% include "topnav/topnav_with_search.html" %}

		<div class="content">
			<div class="assisters">
				{% for assister in assistersData %}
					<div class="assister">
						<div class="header">
							<h1>{{ assister.object.prompt }}</h1>
				            <img src="{% static 'images/info.png' %}" alt="Sun Logo" onclick="displayAssisterHelpPopup()">
						</div>
						<hr>
						<h2>
							{% if assister.object.decisive %} * chose one
							{% else %} * chose many
							{% endif %}
						</h2>
						<form action="" method="POST">
							{% csrf_token %}
							{% with forloop.counter0|stringformat:"i" as assisterId %}
								{% for filter in assister.filters %}
									{% with assisterId|determineButtonValue:forloop.counter0 as buttonValue %}
										<button type="Submit" name="filterField" value={{ buttonValue }}
										style="{{ buttonValue|buildButtonStyle:userAFIds }}">{{ filter }}</button>
									{% endwith %}
								{% endfor %}
							{% endwith %}
						</form>
					</div>
				{% endfor %}
			</div>
			<div class="results">
				<div class="header">
					<form action="" method="POST">
						{% csrf_token %}
						{{ sortForm }}
					</form>
				</div>
				<div class="products">
					{% for product in products %}
						{{ product.data|json_script:product.data.id }}
						<div class="product" onclick="displayProductPopup({{ product.data.id }})">
							<div class="image-container">
								{% with category.name|buildProductImagePath:product.data.imageFileName as productImagePath %}
									<img src="{% static productImagePath %}" alt="{{ product.data.name }}">
								{% endwith %}
							</div>
							<div class="details">
								<h1>{{ product.data.name }}</h1>
								<h2><b>${{ product.data.price|floatformat:2 }}</b></h2>
								<hr>
								{% for pro in product.pros %}
									<div class="procon">
										<img src="{% static 'images/plus.png' %}" alt="Plus">
										<h1>{{ pro.contents }}</h1>
									</div>
								{% endfor %}
								<div class="spacer"></div>
								{% for con in product.cons %}
									<div class="procon">
										<img src="{% static 'images/minus.png' %}" alt="Plus">
										<h1>{{ con.contents }}</h1>
									</div>
								{% endfor %}
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</div>

		{% include "product_popup.html" %}

	</body>

	<script src="{% static 'scripts/category.js' %}"></script>
</html>
