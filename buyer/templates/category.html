<html>
	{% load static %}
	{% load helper %}
	<head>
		<title>SoleBuy - {{ categoryForm.name.value }}</title>

		<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="{% static 'styles/common.css' %}">
		<link rel="stylesheet" type="text/css" href="{% static 'styles/category.css' %}">
	</head>
	<body>
		{% include "topnav/topnav_with_search.html" %}

		<div class="content">
			<form action="" method="POST">
				{% csrf_token %}
				<div class="filters">
					{% for assister in categoryData.assisters %}
						<div class="filter">
							<h3>{{ assister.prompt }}</h3>
							<hr>
							{% with forloop.counter0|stringformat:"i" as assisterId %}
								{% for filter in assister.filters %}
									{% with assisterId|determineButtonValue:forloop.counter0 as buttonValue %}
										<button type="Submit" name="button" value={{ buttonValue }} style="{{ buttonValue|buildButtonStyle:userAFIds }}">{{ filter }}</button>
									{% endwith %}
								{% endfor %}
							{% endwith %}
						</div>
					{% endfor %}
				</div>
			</form>
			<div class="results">
				<div class="products">
					{% for product in categoryData.filteredProducts %}
						{% with product.id|stringformat:"i" as productId %}
							{{ product|json_script:productId }}
							<div class="product" onclick="displayProductPopup({{ productId }})">
						{% endwith %}
								<div class="image-container">
									{% with categoryData.name|buildProductImagePath:product.imageFileName as productImagePath %}
										<img src="{% static productImagePath %}" alt="{{ product.name }}">
									{% endwith %}
								</div>
								<div class="details">
									<h1>{{ product.name }}</h1>
									<h2><b>${{ product.price|floatformat:2 }}</b></h2>
									<hr>
									{% for pro in product.pros %}
										<div class="procon">
											<img src="{% static 'images/plus.png' %}" alt="Plus">
											<h1>{{ pro }}</h1>
										</div>
									{% endfor %}
									<div class="spacer"></div>
									{% for con in product.cons %}
										<div class="procon">
											<img src="{% static 'images/minus.png' %}" alt="Plus">
											<h1>{{ con }}</h1>
										</div>
									{% endfor %}
								</div>
							</div>
					{% endfor %}
				</div>
			</div>
		</div>

		{% include "product_popup.html" %}

	</body>

	<script src="{% static 'scripts/category.js' %}"></script>
</html>
